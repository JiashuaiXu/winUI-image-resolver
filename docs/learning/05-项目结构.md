# 05. 项目结构

详细了解项目的目录结构和文件组织。

## 📁 完整目录结构

```
winUI-image-resolver/
├── 📄 ImageResolver.csproj      # 项目配置文件
├── 📄 app.manifest              # 应用程序清单
├── 📄 Package.appxmanifest      # MSIX 打包清单
│
├── 📂 Models/                   # 数据模型层
│   └── ImageInfo.cs            # 图片信息数据模型
│
├── 📂 Services/                 # 业务逻辑层
│   ├── ImageInfoService.cs     # 图片信息提取服务
│   └── CsvExportService.cs     # CSV 导出服务
│
├── 📂 Assets/                   # 资源文件
│   ├── generate_icons.py       # 图标生成脚本
│   ├── StoreLogo.png           # 应用图标
│   ├── Square44x44Logo.png     # 小图标
│   ├── Square150x150Logo.png   # 中等图标
│   └── Wide310x150Logo.png     # 宽图标
│
├── 📂 docs/                     # 文档目录
│   ├── bugs/                   # Bug 报告
│   └── learning/               # 学习文档（本目录）
│
├── 📂 pic/                      # 测试图片
│   └── *.jpg                   # 示例图片文件
│
├── 📄 App.xaml                  # 应用程序入口 XAML
├── 📄 App.xaml.cs               # 应用程序逻辑
├── 📄 MainWindow.xaml           # 主窗口 XAML
├── 📄 MainWindow.xaml.cs        # 主窗口逻辑
│
├── 📄 README.md                 # 项目说明
├── 📄 DESIGN.md                # 设计文档
├── 📄 QUICKSTART.md            # 快速开始
├── 📄 PUBLISH.md               # 发布文档
├── 📄 PUBLISH_QUICKSTART.md    # 快速发布指南
│
├── 📄 publish.ps1              # 发布脚本
│
├── 📂 bin/                      # 编译输出（自动生成）
│   └── Debug/Release/
│
└── 📂 obj/                      # 临时文件（自动生成）
    └── Debug/Release/
```

## 📄 核心文件说明

### 项目配置文件

#### ImageResolver.csproj
**作用**: 项目配置文件，定义项目属性、依赖包等

**关键配置**:
```xml
<TargetFramework>net8.0-windows10.0.19041.0</TargetFramework>
<UseWinUI>true</UseWinUI>
<WindowsAppSDKSelfContained>true</WindowsAppSDKSelfContained>
```

**说明**:
- 目标框架: .NET 8.0 for Windows
- 启用 WinUI 3
- 自包含部署（包含运行时）

#### app.manifest
**作用**: 应用程序清单，定义兼容性和 DPI 设置

#### Package.appxmanifest
**作用**: MSIX 打包清单，用于应用商店发布

### 应用程序入口

#### App.xaml
**作用**: 应用程序资源定义

**内容**:
- 全局资源字典
- 主题资源
- 样式定义

#### App.xaml.cs
**作用**: 应用程序生命周期管理

**关键代码**:
```csharp
protected override void OnLaunched(LaunchActivatedEventArgs args)
{
    m_window = new MainWindow();
    m_window.Activate();
}
```

### 主窗口

#### MainWindow.xaml
**作用**: 主窗口界面定义

**结构**:
- Grid 布局
- Header（标题和按钮）
- Content（图片列表和详情）
- Footer（状态和导出按钮）

#### MainWindow.xaml.cs
**作用**: 主窗口逻辑

**职责**:
- 事件处理
- 数据绑定
- UI 更新

### 数据模型层

#### Models/ImageInfo.cs
**作用**: 图片信息数据模型

**属性**:
- 基本信息: FileName, FilePath, Width, Height
- EXIF 信息: CameraMake, CameraModel, DateTaken
- GPS 信息: Latitude, Longitude
- 相机设置: ISO, FNumber, ExposureTime

### 业务逻辑层

#### Services/ImageInfoService.cs
**作用**: 图片信息提取服务

**主要方法**:
- `ProcessImagesAsync()`: 批量处理图片
- `ProcessImageAsync()`: 处理单张图片

**功能**:
- 读取图片尺寸
- 提取 EXIF 数据
- 错误处理

#### Services/CsvExportService.cs
**作用**: CSV 导出服务

**主要方法**:
- `ExportToCsvAsync()`: 导出到 CSV 文件

**功能**:
- 使用 CsvHelper 生成 CSV
- 格式化数据
- 错误处理

## 🔗 文件间关系

```
App.xaml.cs
  └─ 创建 MainWindow

MainWindow.xaml.cs
  ├─ 使用 ImageInfoService
  ├─ 使用 CsvExportService
  └─ 绑定 ImageInfoViewModel
      └─ 包含 ImageInfo

ImageInfoService
  └─ 创建 ImageInfo

CsvExportService
  └─ 使用 ImageInfo
```

## 📦 自动生成目录

### bin/
**说明**: 编译输出目录

**结构**:
```
bin/
├── Debug/
│   └── net8.0-windows10.0.19041.0/
│       └── win-x64/
│           ├── ImageResolver.exe
│           ├── ImageResolver.dll
│           └── [运行时文件]
└── Release/
    └── ...
```

### obj/
**说明**: 编译临时文件

**内容**:
- 编译中间文件
- XAML 生成的代码
- NuGet 缓存

**注意**: 这些目录不应提交到 Git

## 🎯 文件命名规范

### C# 文件
- 类名 = 文件名
- 使用 PascalCase
- 示例: `ImageInfo.cs`, `MainWindow.xaml.cs`

### XAML 文件
- 与对应的 C# 文件同名
- 示例: `MainWindow.xaml` ↔ `MainWindow.xaml.cs`

### 资源文件
- 使用描述性名称
- 示例: `Square150x150Logo.png`

## 📚 下一步

- 了解设计模式 → [06-设计模式](./06-设计模式.md)
- 学习 WinUI 3 → [07-WinUI3基础](./07-WinUI3基础.md)
- 查看代码实现 → [11-UI实现详解](./11-UI实现详解.md)

---

**继续学习**: [06-设计模式](./06-设计模式.md) →

