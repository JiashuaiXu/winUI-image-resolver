# 10. æ•°æ®ç»‘å®š

æ•°æ®ç»‘å®šæ˜¯è¿æ¥æ•°æ®å’Œ UI çš„æ¡¥æ¢ã€‚

## ğŸ¯ ä»€ä¹ˆæ˜¯æ•°æ®ç»‘å®šï¼Ÿ

æ•°æ®ç»‘å®šè®© UI è‡ªåŠ¨æ˜¾ç¤ºæ•°æ®ï¼Œæ•°æ®å˜åŒ–æ—¶ UI è‡ªåŠ¨æ›´æ–°ã€‚

```
æ•°æ® (Model)  â†â†’  ç»‘å®š (Binding)  â†â†’  UI (View)
```

## ğŸ“¦ ç»‘å®šç±»å‹

### 1. x:Bindï¼ˆç¼–è¯‘æ—¶ç»‘å®šï¼‰

```xml
<TextBlock Text="{x:Bind FileName}" />
```

**ç‰¹ç‚¹**:
- ç¼–è¯‘æ—¶æ£€æŸ¥ï¼Œæ€§èƒ½æ›´å¥½
- éœ€è¦ä»£ç éšè—ç±»
- ç±»å‹å®‰å…¨

### 2. Bindingï¼ˆè¿è¡Œæ—¶ç»‘å®šï¼‰

```xml
<TextBlock Text="{Binding FileName}" />
```

**ç‰¹ç‚¹**:
- è¿è¡Œæ—¶è§£æï¼Œæ›´çµæ´»
- éœ€è¦ DataContext
- æ”¯æŒå¤æ‚åœºæ™¯

## ğŸ”— ç»‘å®šæ¨¡å¼

### OneWayï¼ˆå•å‘ï¼Œé»˜è®¤ï¼‰

```xml
<TextBlock Text="{x:Bind FileName, Mode=OneWay}" />
```

**è¯´æ˜**: æ•°æ® â†’ UIï¼Œæ•°æ®å˜åŒ–æ—¶ UI æ›´æ–°

### TwoWayï¼ˆåŒå‘ï¼‰

```xml
<TextBox Text="{x:Bind FileName, Mode=TwoWay}" />
```

**è¯´æ˜**: æ•°æ® â†” UIï¼ŒåŒå‘åŒæ­¥

### OneTimeï¼ˆä¸€æ¬¡æ€§ï¼‰

```xml
<TextBlock Text="{x:Bind FileName, Mode=OneTime}" />
```

**è¯´æ˜**: åªç»‘å®šä¸€æ¬¡ï¼Œä¸æ›´æ–°

## ğŸ“‹ é¡¹ç›®ä¸­çš„ç»‘å®š

### åˆ—è¡¨ç»‘å®š

```csharp
// è®¾ç½®æ•°æ®æº
ImageListControl.ItemsSource = _imageInfos;
```

```xml
<!-- åˆ—è¡¨é¡¹æ¨¡æ¿ -->
<ItemsControl x:Name="ImageListControl">
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding FileName}"/>
            <TextBlock Text="{Binding Resolution}"/>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl>
```

### å±æ€§ç»‘å®š

```csharp
public class ImageInfoViewModel
{
    public string FileName => ImageInfo.FileName;
    public string Resolution => ImageInfo.Resolution;
}
```

```xml
<TextBlock Text="{Binding FileName}"/>
<TextBlock Text="{Binding Resolution}"/>
```

## ğŸ”” é€šçŸ¥æ›´æ–°

### INotifyPropertyChanged

```csharp
public class ImageInfoViewModel : INotifyPropertyChanged
{
    private BitmapImage? _thumbnail;
    
    public BitmapImage? Thumbnail
    {
        get => _thumbnail;
        set
        {
            _thumbnail = value;
            OnPropertyChanged(nameof(Thumbnail));
        }
    }
    
    public event PropertyChangedEventHandler? PropertyChanged;
    
    private void OnPropertyChanged(string propertyName)
    {
        PropertyChanged?.Invoke(this, new PropertyChangedEventArgs(propertyName));
    }
}
```

**è¯´æ˜**:
- å±æ€§å˜åŒ–æ—¶é€šçŸ¥ UI
- UI è‡ªåŠ¨æ›´æ–°

## ğŸ¯ ObservableCollection

### åˆ—è¡¨å˜åŒ–é€šçŸ¥

```csharp
private ObservableCollection<ImageInfoViewModel> _imageInfos;

public MainWindow()
{
    _imageInfos = new ObservableCollection<ImageInfoViewModel>();
    ImageListControl.ItemsSource = _imageInfos;
}

// æ·»åŠ é¡¹æ—¶ï¼ŒUI è‡ªåŠ¨æ›´æ–°
_imageInfos.Add(new ImageInfoViewModel(info));
```

**è¯´æ˜**:
- æ·»åŠ /åˆ é™¤é¡¹æ—¶è‡ªåŠ¨é€šçŸ¥ UI
- åˆ—è¡¨è‡ªåŠ¨æ›´æ–°

## ğŸ¨ é€‰ä¸­çŠ¶æ€ç»‘å®šç¤ºä¾‹

### åœ¨ ViewModel ä¸­å®šä¹‰é€‰ä¸­çŠ¶æ€

```csharp
public class ImageInfoViewModel : INotifyPropertyChanged
{
    private bool _isSelected;
    
    public bool IsSelected
    {
        get => _isSelected;
        set
        {
            if (_isSelected != value)
            {
                _isSelected = value;
                OnPropertyChanged(nameof(IsSelected));
            }
        }
    }
}
```

### åœ¨ä»£ç ä¸­æ›´æ–°é€‰ä¸­çŠ¶æ€

```csharp
// é€‰ä¸­é¡¹
viewModel.IsSelected = true;

// å–æ¶ˆé€‰ä¸­
viewModel.IsSelected = false;
```

**è¯´æ˜**:
- è™½ç„¶ WinUI 3 ä¸æ”¯æŒ DataTriggerï¼Œä½†å¯ä»¥é€šè¿‡ä»£ç ç›´æ¥æ›´æ–° UI æ ·å¼
- `IsSelected` å±æ€§å¯ä»¥ç”¨äºå…¶ä»–é€»è¾‘åˆ¤æ–­

## ğŸ“š ä¸‹ä¸€æ­¥

- æŸ¥çœ‹ UI å®ç° â†’ [11-UIå®ç°è¯¦è§£](./11-UIå®ç°è¯¦è§£.md)
- å­¦ä¹ å›¾ç‰‡å¤„ç† â†’ [12-å›¾ç‰‡å¤„ç†](./12-å›¾ç‰‡å¤„ç†.md)

---

**ç»§ç»­å­¦ä¹ **: [11-UIå®ç°è¯¦è§£](./11-UIå®ç°è¯¦è§£.md) â†’

